- script: |
    # Copy the .sql file into the pipeline workspace
    cp ./init.sql $(Pipeline.Workspace)/init.sql

    # Run a container with sqlcmd to connect and run the script
    docker run --rm -v $(Pipeline.Workspace)/init.sql:/init.sql \
      mcr.microsoft.com/mssql-tools \
      /bin/bash -c "/opt/mssql-tools/bin/sqlcmd -S host.docker.internal -U sa -P ${DB_PASS} -i /init.sql"
  displayName: Run init.sql via sqlcmd
  env:
    DB_PASS: $(DB_PASS)

CREATE TABLE test_table (
    id INT PRIMARY KEY,
    name NVARCHAR(100)
);

INSERT INTO test_table (id, name) VALUES (1, 'Alice'), (2, 'Bob');